
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Como usar o Django com o Apache e mod_wsgi &mdash; Django v1.3.1 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Django v1.3.1 documentation" href="../../index.html" />
    <link rel="up" title="Implantando o Django" href="index.html" />
    <link rel="next" title="Como usar o Django com FastCGI, SCGI ou AJP" href="fastcgi.html" />
    <link rel="prev" title="Implantando o Django" href="index.html" />
 
<script type="text/javascript" src="../../templatebuiltins.js"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>

  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Django v1.3.1 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>  |
        <a title="Tabela de conteúdos" href="../../contents.html">Tabela de conteúdos</a>  |
        <a title="Índice Global" href="../../genindex.html">Índice</a>  |
        <a title="Busca" href="../../py-modindex.html">Módulos</a>
      </div>
      <div class="nav">
    &laquo; <a href="index.html" title="Implantando o Django">previous</a> 
     |
    <a href="../index.html" title="Guias &amp;#8220;como fazer&amp;#8221;" accesskey="U">up</a>
   |
    <a href="fastcgi.html" title="Como usar o Django com FastCGI, SCGI ou AJP">next</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="howto-deployment-modwsgi">
            
  <div class="section" id="s-como-usar-o-django-com-o-apache-e-mod-wsgi">
<span id="como-usar-o-django-com-o-apache-e-mod-wsgi"></span><h1>Como usar o Django com o Apache e mod_wsgi<a class="headerlink" href="#como-usar-o-django-com-o-apache-e-mod-wsgi" title="Permalink to this headline">¶</a></h1>
<p>A implantação do Django com <a class="reference external" href="http://httpd.apache.org/">Apache</a> e <a class="reference external" href="http://code.google.com/p/modwsgi/">mod_wsgi</a> é a forma recomendada de ter o
Django funcionando em produção.</p>
<p>O mod_wsgi é um módulo do Apache que pode ser usado para hospedar qualquer aplicação Python
que suporte a <a class="reference external" href="http://www.python.org/dev/peps/pep-0333/">Interface WSGI do Python</a>, incluindo o Django. O Django irá funcionar
com qualquer versão do Apache que suporte o mod_wsgi.</p>
<p>A <a class="reference external" href="http://code.google.com/p/modwsgi/">documentação oficial do mod_wsgi</a> é fantástica; é sua fonte para todos
os detalhes sobre como usar o mod_wsgi. você provavalmente irá querer iniciar com a
<a class="reference external" href="http://code.google.com/p/modwsgi/wiki/InstallationInstructions">documentação de instalação e configuração</a>.</p>
<div class="section" id="s-configuracao-basica">
<span id="configuracao-basica"></span><h2>Configuração Básica<a class="headerlink" href="#configuracao-basica" title="Permalink to this headline">¶</a></h2>
<p>Uma vez que você tenha o mod_wsgi instalado e ativado, edite o seu arquivo <tt class="docutils literal"><span class="pre">httpd.conf</span></tt>
e adicione:</p>
<div class="highlight-python"><pre>WSGIScriptAlias / /path/to/mysite/apache/django.wsgi</pre>
</div>
<p>A primeira parte acima é a url na qual você estará servindo sua aplicação (<tt class="docutils literal"><span class="pre">/</span></tt>
indica a url raiz), e a segunda parte é a localização de um &quot;arquivo WSGI&quot; -- veja
abaixo -- no seu sistema, normalmente dentro do seu projeto. Isso diz ao Apache
para servir quaisquer requisições abaixo de dada URL usando a aplicação WSGI definida por aquele arquivo.</p>
<p>Em seguida, vamos efetivamente criar essa aplicação WSGI, então crie o arquivo
mencionado na segunda parte da linha <tt class="docutils literal"><span class="pre">WSGIScriptAlias</span></tt> e adicione:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;DJANGO_SETTINGS_MODULE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;mysite.settings&#39;</span>

<span class="kn">import</span> <span class="nn">django.core.handlers.wsgi</span>
<span class="n">application</span> <span class="o">=</span> <span class="n">django</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">wsgi</span><span class="o">.</span><span class="n">WSGIHandler</span><span class="p">()</span>
</pre></div>
</div>
<p>Se o seu projeto não está no <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt> padrão você pode adicionar:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/path/to/mysite&#39;</span>
<span class="k">if</span> <span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<p>logo abaixo das linhas de <tt class="docutils literal"><span class="pre">import.sys</span></tt> para colocar o seu projeto no path. Lembre-se de
substituir o 'mysite.settings' como seu arquivo de configurações correto, and '/path/to/mysite'
with your own project's location.</p>
</div>
<div class="section" id="s-serving-files">
<span id="s-id1"></span><span id="serving-files"></span><span id="id1"></span><h2>Serving files<a class="headerlink" href="#serving-files" title="Permalink to this headline">¶</a></h2>
<p>Django doesn't serve files itself; it leaves that job to whichever Web
server you choose.</p>
<p>We recommend using a separate Web server -- i.e., one that's not also running
Django -- for serving media. Here are some good choices:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.lighttpd.net/">lighttpd</a></li>
<li><a class="reference external" href="http://wiki.nginx.org/Main">Nginx</a></li>
<li><a class="reference external" href="http://en.wikipedia.org/wiki/TUX_web_server">TUX</a></li>
<li>A stripped-down version of <a class="reference external" href="http://httpd.apache.org/">Apache</a></li>
<li><a class="reference external" href="http://www.cherokee-project.com/">Cherokee</a></li>
</ul>
<p>If, however, you have no option but to serve media files on the same Apache
<tt class="docutils literal"><span class="pre">VirtualHost</span></tt> as Django, you can set up Apache to serve some URLs as
static media, and others using the mod_wsgi interface to Django.</p>
<p>This example sets up Django at the site root, but explicitly serves
<tt class="docutils literal"><span class="pre">robots.txt</span></tt>, <tt class="docutils literal"><span class="pre">favicon.ico</span></tt>, any CSS file, and anything in the
<tt class="docutils literal"><span class="pre">/static/</span></tt> and <tt class="docutils literal"><span class="pre">/media/</span></tt> URL space as a static file. All other URLs
will be served using mod_wsgi:</p>
<div class="highlight-python"><pre>Alias /robots.txt /usr/local/wsgi/static/robots.txt
Alias /favicon.ico /usr/local/wsgi/static/favicon.ico

AliasMatch ^/([^/]*\.css) /usr/local/wsgi/static/styles/$1

Alias /media/ /usr/local/wsgi/media/
Alias /static/ /usr/local/wsgi/static/

&lt;Directory /usr/local/wsgi/static&gt;
Order deny,allow
Allow from all
&lt;/Directory&gt;

&lt;Directory /usr/local/wsgi/media&gt;
Order deny,allow
Allow from all
&lt;/Directory&gt;

WSGIScriptAlias / /usr/local/wsgi/scripts/django.wsgi

&lt;Directory /usr/local/wsgi/scripts&gt;
Order allow,deny
Allow from all
&lt;/Directory&gt;</pre>
</div>
</div>
<div class="section" id="s-serving-the-admin-files">
<span id="s-id3"></span><span id="serving-the-admin-files"></span><span id="id3"></span><h2>Serving the admin files<a class="headerlink" href="#serving-the-admin-files" title="Permalink to this headline">¶</a></h2>
<p>Note that the Django development server automagically serves the static files
of the admin app, but this is not the case when you use any other server
arrangement. You're responsible for setting up Apache, or whichever media
server you're using, to serve the admin files.</p>
<p>The admin files live in (<tt class="file docutils literal"><span class="pre">django/contrib/admin/static/admin</span></tt>) of the
Django distribution.</p>
<p>We <strong>strongly</strong> recommend using <a class="reference internal" href="../../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.staticfiles</span></tt></a> to handle
the admin files, but here are two other approaches:</p>
<ol class="arabic simple">
<li>Create a symbolic link to the admin static files from within your
document root.</li>
<li>Or, copy the admin static files so that they live within your Apache
document root.</li>
</ol>
</div>
<div class="section" id="s-detalhes">
<span id="detalhes"></span><h2>Detalhes<a class="headerlink" href="#detalhes" title="Permalink to this headline">¶</a></h2>
<p>Para maiores detalhes, veja a <a class="reference external" href="http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango">documentação do mod_wsgi</a>, que explica os itens acima em
maior detalhamento, e lhe dá todas as possibilidades de opções que você tem
ao fazer uma implantação no mod_wsgi.</p>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Como usar o Django com o Apache e mod_wsgi</a><ul>
<li><a class="reference internal" href="#configuracao-basica">Configuração Básica</a></li>
<li><a class="reference internal" href="#serving-files">Serving files</a></li>
<li><a class="reference internal" href="#serving-the-admin-files">Serving the admin files</a></li>
<li><a class="reference internal" href="#detalhes">Detalhes</a></li>
</ul>
</li>
</ul>

  <h3>Browse</h3>
  <ul>
    
      <li>Prev: <a href="index.html">Implantando o Django</a></li>
    
    
      <li>Next: <a href="fastcgi.html">Como usar o Django com FastCGI, SCGI ou AJP</a></li>
    
  </ul>
  <h3>Você está aqui:</h3>
  <ul>
      <li>
        <a href="../../index.html">Django v1.3.1 documentation</a>
        
          <ul><li><a href="../index.html">Guias &#8220;como fazer&#8221;</a>
        
          <ul><li><a href="index.html">Implantando o Django</a>
        
        <ul><li>Como usar o Django com o Apache e mod_wsgi</li></ul>
        </li></ul></li></ul>
      </li>
  </ul>  

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/howto/deployment/modwsgi.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Última atualização:</h3>
              <p class="topless">Dec 26, 2011</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="index.html" title="Implantando o Django">previous</a> 
     |
    <a href="../index.html" title="Guias &amp;#8220;como fazer&amp;#8221;" accesskey="U">up</a>
   |
    <a href="fastcgi.html" title="Como usar o Django com FastCGI, SCGI ou AJP">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>